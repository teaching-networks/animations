<h1>{{ "group-management.title" | i18n }}</h1>

<div class="manage-wrapper">
	<div class="sidebar">

		<material-list width="3">
			<div group class="actions">
				<div label class="group-sidebar-label">
					<material-icon size="x-small" icon="build"></material-icon>
					{{ "group-management.menu.actions" | i18n }}
				</div>
				<material-list-item (trigger)="createGroup()">
					<material-icon icon="create"></material-icon>
					{{ "group-management.menu.create-group" | i18n }}
				</material-list-item>

				<material-list-item [ngClass]="{'updated': recentlySaved}"
									[disabled]="!hasGroupSelected || saveInProgress"
									(trigger)="saveGroup(selectedGroup)">
					<material-spinner *ngIf="saveInProgress"></material-spinner>
					<material-icon *ngIf="!saveInProgress && !hasSaveError" icon="save"></material-icon>
					<material-icon *ngIf="hasSaveError" icon="error"></material-icon>
					{{ getSaveButtonLabel() }}
				</material-list-item>
				<material-list-item [ngClass]="{'updated': recentlyDeleted}"
									[disabled]="!hasGroupSelected || deleteInProgress"
									(trigger)="deleteGroup(selectedGroup)">
					<material-spinner *ngIf="deleteInProgress"></material-spinner>
					<material-icon *ngIf="!deleteInProgress && !hasDeleteError" icon="delete_forever"></material-icon>
					<material-icon *ngIf="hasDeleteError" icon="error"></material-icon>
					{{ getDeleteButtonLabel() }}
				</material-list-item>
			</div>

			<div label class="group-sidebar-label">
				<material-icon size="x-small" icon="playlist_play"></material-icon>
				{{ "group-management.menu.groups" | i18n }}
			</div>
			<template [ngIf]="isLoadingGroups">
				<material-list-item class="centered-list-item">
					<material-spinner></material-spinner>
				</material-list-item>
			</template>
			<template [ngIf]="!isLoadingGroups">
				<template [ngIf]="groups == null">
					<material-list-item class="centered-list-item">
						<material-icon icon="error"></material-icon>
						<span>{{ "group-management.error-group-loading" | i18n }}</span>
					</material-list-item>
				</template>
				<template [ngIf]="groups != null">
					<material-select-item *ngFor="let group of groups" (trigger)="selectGroup(group)"
										  [selected]="isGroupSelected(group)">
						{{ getItemLabel(group) }}
					</material-select-item>
				</template>
			</template>

		</material-list>
	</div>
	<div class="content" [ngClass]="{'disabled': !hasGroupSelected}">
		<template [ngIf]="!hasGroupSelected">
			<div class="placeholder">
				{{ "group-management.placeholder" | i18n }}
			</div>
		</template>
		<template [ngIf]="hasGroupSelected">

			<form class="group-form">
				<div>
					<label>{{ "group-management.group-name" | i18n }}</label>
					<material-input [(ngModel)]="selectedGroup.name" name="group-name"></material-input>
					<i style="color: lightslategray">&nbsp;(URL: {{ getExampleUrl(selectedGroup) }})</i>
				</div>
				<div class="animation-list">
					<div style="margin-bottom: 0.5em">
						<label>{{ "group-management.animations-to-display" | i18n }}</label>
					</div>
					<div>
						<div *ngIf="isLoadingAnimations" class="progress">
							<material-spinner></material-spinner>
						</div>
						<div *ngIf="!isLoadingAnimations">
							<dnd-list [items]="currentAnimationsDescriptorsView"
									  [itemRenderer]="animationItemRenderer"></dnd-list>
						</div>
					</div>
				</div>
			</form>

		</template>
	</div>
</div>