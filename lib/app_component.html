<header class="header">
	<div class="logo">
		<img src="img/hm_logo.svg">
	</div>
	<div class="rest">
		<span class="title">{{ "title" | i18n }}</span>
		<nav class="toolbar">
			<a [routerLink]="routes.overview.toUrl()">
				<material-icon icon="home" class="animated"></material-icon>
				{{ "overview" | i18n }}</a>
		</nav>
	</div>
</header>

<section class="main-section">
	<router-outlet [routes]="routes.all"></router-outlet>
</section>

<footer class="footer">
	<material-dropdown-select
			[buttonText]="languageSelectionLabel"
			[selection]="languageSelectionModel"
			[options]="languageSelectionOptions"
			[factoryRenderer]="componentLabelFactory"
			[deselectOnActivate]="false">
	</material-dropdown-select>

	<span>{{ "copyright" | i18n }} &copy; <b>{{year}}</b> {{ "munichUniversityName" | i18n }}</span>

	<material-button (click)="authenticationChange()">
		<material-icon *ngIf="!isLoggedIn" icon="lock_open"></material-icon>
		<material-icon *ngIf="isLoggedIn" icon="lock"></material-icon>
	</material-button>
</footer>

<modal [(visible)]="showLoginDialog">
	<material-dialog headered>

		<div header>
			<h1>Anmeldung</h1>
			<p>... zur Administration.</p>
		</div>

		<div>
			<div *ngIf="isCheckingCredentials">
				<material-progress [indeterminate]="true"></material-progress>
			</div>
			<div *ngIf="showLoginError" style="color: coral">
				<p>Die Anmeldung ist fehlgeschlagen.</p>
			</div>
			<form (submit)="login()">
				<div>
					<material-input [(ngModel)]="username" hintText="Benutzername"
									name="username" [disabled]="isCheckingCredentials"></material-input>
				</div>
				<div>
					<material-input [(ngModel)]="password" type="password" hintText="Passwort"
									name="password" [disabled]="isCheckingCredentials"></material-input>
				</div>
			</form>
		</div>

		<div footer style="display: flex; flex-flow: row; justify-content: space-between">
			<material-button clear-size (trigger)="showLoginDialog = false">
				<material-icon icon="close"></material-icon> Close
			</material-button>

			<material-button clear-size (click)="login()">
				<material-icon icon="check_circle"></material-icon> Login
			</material-button>
		</div>

	</material-dialog>
</modal>