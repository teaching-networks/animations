<header class="header">
	<div class="logo">
		<img src="img/hm_logo.svg">
	</div>
	<div class="rest">
		<span class="title">{{ "title" | i18n }}</span>
		<nav class="main-navigation">
			<a [routerLink]="routes.groups.toUrl()">
				<material-icon icon="home" class="animated"></material-icon>
				{{ "overview" | i18n }}</a>

			<span *restricted>
				<a [routerLink]="routes.userManagement.toUrl()">
					<material-icon icon="person" class="animated"></material-icon>
					{{ "user-management" | i18n }}</a>
				<a [routerLink]="routes.animationManagement.toUrl()">
					<material-icon icon="play_arrow" class="animated"></material-icon>
					{{ "animation-management" | i18n }}</a>
				<a [routerLink]="routes.groupManagement.toUrl()">
					<material-icon icon="playlist_play" class="animated"></material-icon>
					{{ "group-management" | i18n }}</a>
			</span>

		</nav>
	</div>
</header>

<section class="main-section">
	<router-outlet [routes]="routes.all"></router-outlet>
</section>

<footer class="footer">
	<span class="aligned-footer">
		<material-icon icon="language"></material-icon>
		<material-dropdown-select
				[buttonText]="languageSelectionLabel"
				[selection]="languageSelectionModel"
				[options]="languageSelectionOptions"
				[factoryRenderer]="componentLabelFactory"
				[deselectOnActivate]="false">
		</material-dropdown-select>
	</span>

	<span class="footer-text">
		<p style="font-size: 1.1em">
			{{ "copyright" | i18n }} &copy; <b>{{year}}</b> {{ "munichUniversityName" | i18n }}
		</p>
		<p>
			{{ "imprint-info" | i18n }} <a href="https://www.hm.edu"
										   target="_blank">{{ "munichUniversityName" | i18n }}</a>
		</p>
		<p>
			<a href="mailto:lars.wischhof@hm.edu">{{ "contact" | i18n }}</a>
		</p>
		<p>
			{{ "version" | i18n }}: {{ version }}
		</p>
	</span>

	<span class="aligned-footer">
		<span *ngIf="isLoggedIn && authenticatedUser != null">{{ "logged-in-as" | i18n }}&nbsp;<b>{{ authenticatedUser.name }}</b></span>
		<material-button (click)="authenticationChange()" icon>
			<material-icon *ngIf="!isLoggedIn" icon="lock_open"></material-icon>
			<material-icon *ngIf="isLoggedIn" icon="lock"></material-icon>
		</material-button>
	</span>
</footer>

<modal [(visible)]="showLoginDialog">
	<material-dialog headered class="headered-dialog" [error]="loginErrorMessageToShow?.toString()">

		<div header>
			<h1>{{ "login.title" | i18n }}</h1>
			<p>{{ "login.subtitle" | i18n }}</p>
		</div>

		<div>
			<div *ngIf="isCheckingCredentials">
				<material-progress [indeterminate]="true"></material-progress>
			</div>
			<form style="text-align: center">
				<div>
					<material-input [(ngModel)]="username" hintText="{{ 'login.username' | i18n }}"
									name="username" [disabled]="isCheckingCredentials"></material-input>
				</div>
				<div>
					<material-input [(ngModel)]="password" type="password" hintText="{{ 'login.password' | i18n }}"
									name="password" [disabled]="isCheckingCredentials"></material-input>
				</div>
			</form>
		</div>

		<div footer style="display: flex; flex-flow: row; justify-content: space-between">
			<material-button clear-size (trigger)="showLoginDialog = false">
				<material-icon icon="close"></material-icon>
				{{ "login.close" | i18n }}
			</material-button>

			<material-button clear-size type="submit" (click)="login()">
				<material-icon icon="check_circle"></material-icon>
				{{ "login.submit" | i18n }}
			</material-button>
		</div>

	</material-dialog>
</modal>